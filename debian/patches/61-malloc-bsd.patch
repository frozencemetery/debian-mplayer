From: diego <subversion@mplayerhq.hu>
Subject: r31054 - trunk/configure
Newsgroups: gmane.comp.video.mplayer.cvs
To: mplayer-cvslog@mplayerhq.hu
Date: Wed, 21 Apr 2010 14:43:16 +0200 (CEST)
Reply-To: MPlayer CVS changelogs and discussion <mplayer-cvslog@mplayerhq.hu>

Author: diego
Date: Wed Apr 21 14:43:16 2010
New Revision: 31054

Log:
Revert obscure hack that disables the malloc.h check on certain BSD platforms.

It's unclear what disabling the result of the check is good for and why it is
necessary.  Just avoiding a warning is not a good enough reason.  Furthermore
this hack introduces problems on 64 bit (k)FreeBSD, as reported in Debian bug
#578622, which indicates it might never have been a good idea at all.

Modified:
   trunk/configure

Modified: trunk/configure
==============================================================================
--- trunk/configure	Tue Apr 20 22:25:35 2010	(r31053)
+++ trunk/configure	Wed Apr 21 14:43:16 2010	(r31054)
@@ -3444,8 +3444,6 @@ if test "$_malloc" = yes ; then
 else
   def_malloc_h='#define HAVE_MALLOC_H 0'
 fi
-# malloc.h emits a warning in FreeBSD and OpenBSD
-freebsd || openbsd || dragonfly && def_malloc_h='#define HAVE_MALLOC_H 0'
 echores "$_malloc"
